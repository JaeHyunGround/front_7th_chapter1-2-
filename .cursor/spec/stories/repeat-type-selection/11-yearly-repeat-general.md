---
epic: repeat-type-selection
test_suite: 매년 반복 생성 - 일반 케이스
---

# Story: 매년 반복 생성 - 일반 케이스

## 개요

시작일부터 종료일까지 지정된 간격으로 동일 월/일에 매년 반복되는 일정을 생성합니다. (일반적인 날짜: 2월 29일 제외)

## Epic 연결

- **Epic**: 반복 유형 선택
- **Epic 파일**: `.cursor/spec/epics/repeat-type-selection.md`
- **검증 포인트**: Epic의 "예상 동작" 섹션 11번에서 추출

## 테스트 구조 및 범위

이 Story가 작성될 테스트 코드의 논리적 계층 구조를 명시합니다.

- **테스트 스위트 (Describe Block):** '매년 반복 생성 - 일반 케이스'
  - **테스트 케이스 1:** '간격 1로 매년 1월 15일 반복 시 매년 1월 15일에 일정이 생성됨'
  - **테스트 케이스 2:** '간격 2로 매년 1월 15일 반복 시 2년마다 1월 15일에 일정이 생성됨'
  - **테스트 케이스 3:** '간격 1로 매년 12월 25일 반복 시 매년 12월 25일에 일정이 생성됨'

## 검증 포인트 (Given-When-Then)

Epic에서 가져온 모든 검증 포인트를 명시합니다.

### 검증 포인트 1: 매년 반복

```
Given: 시작일 2024-01-15, 반복 유형 매년, 간격 1
When: 일정을 생성
Then: 2024-01-15, 2025-01-15, 2026-01-15, ... 매년 1월 15일에 생성
```

### 검증 포인트 2: 2년마다 반복

```
Given: 시작일 2024-01-15, 반복 유형 매년, 간격 2
When: 일정을 생성
Then: 2024-01-15, 2026-01-15, 2028-01-15, ... 2년마다 1월 15일에 생성
```

### 검증 포인트 3: 연말 반복

```
Given: 시작일 2024-12-25, 반복 유형 매년, 간격 1
When: 일정을 생성
Then: 2024-12-25, 2025-12-25, 2026-12-25, ... 매년 12월 25일에 생성
```

## 테스트 데이터

테스트에서 사용할 구체적인 데이터를 명시합니다.

| 시작일     | 간격 | 생성될 날짜 (예시)                      | 비고       |
| ---------- | ---- | --------------------------------------- | ---------- |
| 2024-01-15 | 1    | 2024-01-15, 2025-01-15, 2026-01-15, ... | 매년       |
| 2024-01-15 | 2    | 2024-01-15, 2026-01-15, 2028-01-15, ... | 2년마다    |
| 2024-01-15 | 3    | 2024-01-15, 2027-01-15, 2030-01-15, ... | 3년마다    |
| 2024-12-25 | 1    | 2024-12-25, 2025-12-25, 2026-12-25, ... | 크리스마스 |
| 2024-03-01 | 1    | 2024-03-01, 2025-03-01, 2026-03-01, ... | 매년       |

## 기술 참고사항

### 관련 타입

```typescript
type RepeatType = 'none' | 'daily' | 'weekly' | 'monthly' | 'yearly';

interface RepeatInfo {
  type: RepeatType;
  interval: number;
  endDate?: string;
}
```

### 생성 알고리즘

```
시작일에서 시작
종료일까지 또는 표시 범위까지:
  if 현재 년에 시작일의 month/day가 존재:
    현재 날짜에 일정 생성
  현재 년 += interval년
```

### 동작 명세

- 시작일부터 종료일까지 매 N년마다 동일 월/일에 일정을 생성한다.
- N은 반복 간격이다.
- 해당 날짜가 존재하지 않는 해는 건너뛴다. (2월 29일 특수 케이스는 별도 Story)

---
