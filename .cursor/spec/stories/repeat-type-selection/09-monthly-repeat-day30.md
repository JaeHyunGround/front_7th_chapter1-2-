---
epic: repeat-type-selection
test_suite: 매월 반복 생성 - 30일 특수 케이스
---

# Story: 매월 반복 생성 - 30일 특수 케이스

## 개요

30일에 매월 반복 일정을 생성할 때, 30일이 있는 달에만 일정을 생성하고 30일이 없는 달(2월)은 건너뜁니다.

## Epic 연결

- **Epic**: 반복 유형 선택
- **Epic 파일**: `.cursor/spec/epics/repeat-type-selection.md`
- **검증 포인트**: Epic의 "예상 동작" 섹션 9번에서 추출

## 테스트 구조 및 범위

이 Story가 작성될 테스트 코드의 논리적 계층 구조를 명시합니다.

- **테스트 스위트 (Describe Block):** '매월 반복 생성 - 30일 특수 케이스'
  - **테스트 케이스 1:** '30일 매월 반복 시 30일이 있는 달에만 일정이 생성됨'
  - **테스트 케이스 2:** '30일이 없는 달(2월)은 건너뜀'
  - **테스트 케이스 3:** '6개월 치 일정 생성 시 2월만 건너뛰고 나머지 달에 생성됨'

## 검증 포인트 (Given-When-Then)

Epic에서 가져온 모든 검증 포인트를 명시합니다.

### 검증 포인트 1: 30일 매월 반복

```
Given: 시작일 2024-01-30, 반복 유형 매월, 간격 1
When: 6개월 치 일정을 생성
Then: 다음 날짜에만 일정이 생성됨
  - 2024-01-30 ✓ (30일 있음)
  - 2024-02-xx ✗ (30일 없음, 건너뜀)
  - 2024-03-30 ✓ (30일 있음)
  - 2024-04-30 ✓ (30일 있음)
  - 2024-05-30 ✓ (30일 있음)
  - 2024-06-30 ✓ (30일 있음)
```

## 테스트 데이터

테스트에서 사용할 구체적인 데이터를 명시합니다.

### 2024년 1월 30일 시작, 간격 1

| 월  | 30일 존재 여부 | 일정 생성 여부 | 생성 날짜  | 비고        |
| --- | -------------- | -------------- | ---------- | ----------- |
| 1월 | ✓              | ✓              | 2024-01-30 | 31일        |
| 2월 | ✗              | ✗              | (건너뜀)   | 29일 (윤년) |
| 3월 | ✓              | ✓              | 2024-03-30 | 31일        |
| 4월 | ✓              | ✓              | 2024-04-30 | 30일        |
| 5월 | ✓              | ✓              | 2024-05-30 | 31일        |
| 6월 | ✓              | ✓              | 2024-06-30 | 30일        |

### 2023년 1월 30일 시작, 간격 1 (평년 테스트)

| 월  | 30일 존재 여부 | 일정 생성 여부 | 생성 날짜  | 비고        |
| --- | -------------- | -------------- | ---------- | ----------- |
| 1월 | ✓              | ✓              | 2023-01-30 | 31일        |
| 2월 | ✗              | ✗              | (건너뜀)   | 28일 (평년) |
| 3월 | ✓              | ✓              | 2023-03-30 | 31일        |

## 기술 참고사항

### 관련 함수

```typescript
function getDaysInMonth(year: number, month: number): number {
  return new Date(year, month, 0).getDate();
}

function isValidDate(year: number, month: number, day: number): boolean {
  const daysInMonth = getDaysInMonth(year, month);
  return day >= 1 && day <= daysInMonth;
}
```

### 30일이 없는 달

- 2월만 해당 (28일 또는 29일)

### 30일이 있는 달

- 1월, 3월, 4월, 5월, 6월, 7월, 8월, 9월, 10월, 11월, 12월 (총 11개월)

### 동작 명세

- 30일에 매월 반복을 선택하면 30일이 있는 달에만 일정을 생성한다.
- 30일이 없는 달(2월)은 건너뛴다.

---
