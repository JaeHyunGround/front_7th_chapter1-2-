# Story: 특수 날짜 규칙 테스트 (2/29, 31일)

## 1. 배경/문제

- 관련 Epic/PRD 근거: `.cursor/spec/epics/repeat-type-selection.md`, `.cursor/spec/prd.md`
- 월 31일/윤년 2/29와 같은 특수 날짜에서 반복 인스턴스 생성/표시 규칙을 명확히 해야 함.

## 2. 목표 및 기대 결과

- 시스템이 특수 날짜 규칙을 준수하도록 테스트(설계 수준 포함)를 보유한다.

## 3. 수용 기준 (Acceptance Criteria)

- [ ] monthly(31일) 반복: 31일이 없는 달에는 인스턴스가 생성/표시되지 않는 것으로 규정한다.
- [ ] yearly(2/29) 반복: 윤년이 아닌 해에는 인스턴스가 생성/표시되지 않는 것으로 규정한다.
- [ ] 현재 Epic 범위에서는 “반복 인스턴스 전개”를 하지 않으므로, 날짜 유효성 판정 유틸/테스트 설계로 대체한다.
- [ ] 위 규칙을 검증하는 단위 테스트 스켈레톤 또는 설계 문서를 제공한다.

## 4. 작업 단계 (Task Breakdown)

1. **컴포넌트 구조 설계**

   - (비UI) 날짜 규칙 판단 유틸리티 설계 (`isValidRepeatOccurrenceDate`와 같은 명세 수준 함수)

2. **상태/데이터 흐름 정의**

   - `repeat` 메타(type/interval/endDate)와 날짜 유틸 간 입력/출력 계약 정의

3. **API 연동 및 검증**

   - 해당 없음(클라이언트 규칙 테스트)

4. **테스트 작성**

   - 케이스: monthly 31일 → 4월/6월/9월/11월/2월은 무효
   - 케이스: yearly 2/29 → 2025, 2026 무효 / 2028 유효

5. **검수 및 리뷰 요청**

   - 규칙 문구/케이스 완비성 리뷰

## 5. 의존성/우선순위

- 선행 Story: `반복 상태/유효성 추가 (useEventForm)`
- 후속 Story: (차기) 반복 인스턴스 전개/렌더링
- Epic 내 우선순위: 보통

## 6. 리스크 및 대응

- 리스크: 인스턴스 전개 미포함으로 실제 UI에서 확인 곤란
- 완화 전략: 유틸/테스트 설계로 규칙 고정, 후속 스프린트에서 전개 기능과 연결

## 7. 오픈 이슈

- [기능 미정] 월말 이동 규칙(예: 31일 → 30일 보정) 불채택 명시 필요 여부

## 8. 참고/근거

- Epic 파일 경로: `.cursor/spec/epics/repeat-type-selection.md`
- 관련 테스트/유틸 파일: `src/utils/dateUtils.ts`, `src/__tests__/unit/easy.dateUtils.spec.ts`
