---
epic: repeat-type-selection
test_suite: 매월 반복 생성 - 31일 특수 케이스
---

# Story: 매월 반복 생성 - 31일 특수 케이스

## 개요

31일에 매월 반복 일정을 생성할 때, 31일이 있는 달에만 일정을 생성하고 31일이 없는 달은 건너뜁니다.

## Epic 연결

- **Epic**: 반복 유형 선택
- **Epic 파일**: `.cursor/spec/epics/repeat-type-selection.md`
- **검증 포인트**: Epic의 "예상 동작" 섹션 8번에서 추출

## 테스트 구조 및 범위

이 Story가 작성될 테스트 코드의 논리적 계층 구조를 명시합니다.

- **테스트 스위트 (Describe Block):** '매월 반복 생성 - 31일 특수 케이스'
  - **테스트 케이스 1:** '31일 매월 반복 시 31일이 있는 달에만 일정이 생성됨'
  - **테스트 케이스 2:** '31일이 없는 달(2월, 4월, 6월, 9월, 11월)은 건너뜀'
  - **테스트 케이스 3:** '1년 치 일정 생성 시 7개월(1, 3, 5, 7, 8, 10, 12월)에만 생성됨'

## 검증 포인트 (Given-When-Then)

Epic에서 가져온 모든 검증 포인트를 명시합니다.

### 검증 포인트 1: 31일 매월 반복

```
Given: 시작일 2024-01-31, 반복 유형 매월, 간격 1
When: 1년 치 일정을 생성
Then: 다음 날짜에만 일정이 생성됨
  - 2024-01-31 ✓ (31일 있음)
  - 2024-02-xx ✗ (31일 없음, 건너뜀)
  - 2024-03-31 ✓ (31일 있음)
  - 2024-04-xx ✗ (31일 없음, 건너뜀)
  - 2024-05-31 ✓ (31일 있음)
  - 2024-06-xx ✗ (31일 없음, 건너뜀)
  - 2024-07-31 ✓ (31일 있음)
  - 2024-08-31 ✓ (31일 있음)
  - 2024-09-xx ✗ (31일 없음, 건너뜀)
  - 2024-10-31 ✓ (31일 있음)
  - 2024-11-xx ✗ (31일 없음, 건너뜀)
  - 2024-12-31 ✓ (31일 있음)
```

## 테스트 데이터

테스트에서 사용할 구체적인 데이터를 명시합니다.

### 2024년 1월 31일 시작, 간격 1

| 월   | 31일 존재 여부 | 일정 생성 여부 | 생성 날짜  |
| ---- | -------------- | -------------- | ---------- |
| 1월  | ✓              | ✓              | 2024-01-31 |
| 2월  | ✗              | ✗              | (건너뜀)   |
| 3월  | ✓              | ✓              | 2024-03-31 |
| 4월  | ✗              | ✗              | (건너뜀)   |
| 5월  | ✓              | ✓              | 2024-05-31 |
| 6월  | ✗              | ✗              | (건너뜀)   |
| 7월  | ✓              | ✓              | 2024-07-31 |
| 8월  | ✓              | ✓              | 2024-08-31 |
| 9월  | ✗              | ✗              | (건너뜀)   |
| 10월 | ✓              | ✓              | 2024-10-31 |
| 11월 | ✗              | ✗              | (건너뜀)   |
| 12월 | ✓              | ✓              | 2024-12-31 |

**총 생성 개수**: 7개 (1, 3, 5, 7, 8, 10, 12월)

## 기술 참고사항

### 관련 함수

```typescript
function getDaysInMonth(year: number, month: number): number {
  return new Date(year, month, 0).getDate();
}

function isValidDate(year: number, month: number, day: number): boolean {
  const daysInMonth = getDaysInMonth(year, month);
  return day >= 1 && day <= daysInMonth;
}
```

### 31일이 있는 달

- 1월, 3월, 5월, 7월, 8월, 10월, 12월 (총 7개월)

### 31일이 없는 달

- 2월 (28일 또는 29일)
- 4월, 6월, 9월, 11월 (30일)

### 동작 명세

- 31일에 매월 반복을 선택하면 31일이 있는 달에만 일정을 생성한다.
- 31일이 없는 달(2월, 4월, 6월, 9월, 11월)은 건너뛴다.
- 마지막 날로 변환하지 않는다.

---
