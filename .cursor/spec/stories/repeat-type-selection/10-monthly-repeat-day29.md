---
epic: repeat-type-selection
test_suite: 매월 반복 생성 - 29일 특수 케이스
---

# Story: 매월 반복 생성 - 29일 특수 케이스

## 개요

29일에 매월 반복 일정을 생성할 때, 윤년 2월은 포함하고 평년 2월은 건너뜁니다.

## Epic 연결

- **Epic**: 반복 유형 선택
- **Epic 파일**: `.cursor/spec/epics/repeat-type-selection.md`
- **검증 포인트**: Epic의 "예상 동작" 섹션 10번에서 추출

## 테스트 구조 및 범위

이 Story가 작성될 테스트 코드의 논리적 계층 구조를 명시합니다.

- **테스트 스위트 (Describe Block):** '매월 반복 생성 - 29일 특수 케이스'
  - **테스트 케이스 1:** '윤년에 29일 매월 반복 시 2월 29일이 포함됨'
  - **테스트 케이스 2:** '평년에 29일 매월 반복 시 2월은 건너뜀'
  - **테스트 케이스 3:** '윤년과 평년이 섞인 기간에 윤년 2월만 포함됨'

## 검증 포인트 (Given-When-Then)

Epic에서 가져온 모든 검증 포인트를 명시합니다.

### 검증 포인트 1: 윤년 29일 반복

```
Given: 시작일 2024-01-29 (윤년), 반복 유형 매월, 간격 1
When: 3개월 치 일정을 생성
Then: 다음 날짜에만 일정이 생성됨
  - 2024-01-29 ✓ (29일 있음)
  - 2024-02-29 ✓ (윤년이라 29일 있음)
  - 2024-03-29 ✓ (29일 있음)
```

### 검증 포인트 2: 평년 29일 반복

```
Given: 시작일 2023-01-29 (평년), 반복 유형 매월, 간격 1
When: 3개월 치 일정을 생성
Then: 다음 날짜에만 일정이 생성됨
  - 2023-01-29 ✓ (29일 있음)
  - 2023-02-xx ✗ (평년이라 29일 없음, 건너뜀)
  - 2023-03-29 ✓ (29일 있음)
```

## 테스트 데이터

테스트에서 사용할 구체적인 데이터를 명시합니다.

### 2024년 1월 29일 시작 (윤년)

| 월  | 29일 존재 여부 | 일정 생성 여부 | 생성 날짜  | 비고 |
| --- | -------------- | -------------- | ---------- | ---- |
| 1월 | ✓              | ✓              | 2024-01-29 | 31일 |
| 2월 | ✓              | ✓              | 2024-02-29 | 윤년 |
| 3월 | ✓              | ✓              | 2024-03-29 | 31일 |
| 4월 | ✓              | ✓              | 2024-04-29 | 30일 |

### 2023년 1월 29일 시작 (평년)

| 월  | 29일 존재 여부 | 일정 생성 여부 | 생성 날짜  | 비고 |
| --- | -------------- | -------------- | ---------- | ---- |
| 1월 | ✓              | ✓              | 2023-01-29 | 31일 |
| 2월 | ✗              | ✗              | (건너뜀)   | 평년 |
| 3월 | ✓              | ✓              | 2023-03-29 | 31일 |
| 4월 | ✓              | ✓              | 2023-04-29 | 30일 |

### 2023년 12월 29일 시작 (평년→윤년 전환)

| 월   | 29일 존재 여부 | 일정 생성 여부 | 생성 날짜  | 비고          |
| ---- | -------------- | -------------- | ---------- | ------------- |
| 12월 | ✓              | ✓              | 2023-12-29 | 31일          |
| 1월  | ✓              | ✓              | 2024-01-29 | 31일          |
| 2월  | ✓              | ✓              | 2024-02-29 | 윤년으로 전환 |
| 3월  | ✓              | ✓              | 2024-03-29 | 31일          |

## 기술 참고사항

### 윤년 판별 함수

```typescript
function isLeapYear(year: number): boolean {
  if (year % 400 === 0) return true;
  if (year % 100 === 0) return false;
  if (year % 4 === 0) return true;
  return false;
}

function getDaysInMonth(year: number, month: number): number {
  return new Date(year, month, 0).getDate();
}
```

### 윤년 판별 규칙

- 4로 나누어떨어지는 해는 윤년
- 단, 100으로 나누어떨어지는 해는 평년
- 단, 400으로 나누어떨어지는 해는 윤년

### 동작 명세

- 29일에 매월 반복을 선택하면 29일이 있는 달에만 일정을 생성한다.
- 평년 2월은 건너뛴다.
- 윤년 2월은 포함한다.

---
