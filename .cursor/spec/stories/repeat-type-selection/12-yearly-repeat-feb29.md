---
epic: repeat-type-selection
test_suite: 매년 반복 생성 - 윤년 2월 29일 특수 케이스
---

# Story: 매년 반복 생성 - 윤년 2월 29일 특수 케이스

## 개요

윤년 2월 29일에 매년 반복 일정을 생성할 때, 2월 29일이 있는 해(윤년)에만 일정을 생성하고 평년은 건너뜁니다.

## Epic 연결

- **Epic**: 반복 유형 선택
- **Epic 파일**: `.cursor/spec/epics/repeat-type-selection.md`
- **검증 포인트**: Epic의 "예상 동작" 섹션 12번에서 추출

## 테스트 구조 및 범위

이 Story가 작성될 테스트 코드의 논리적 계층 구조를 명시합니다.

- **테스트 스위트 (Describe Block):** '매년 반복 생성 - 윤년 2월 29일 특수 케이스'
  - **테스트 케이스 1:** '2월 29일 매년 반복 시 윤년에만 일정이 생성됨'
  - **테스트 케이스 2:** '평년(2025, 2026, 2027 등)은 건너뜀'
  - **테스트 케이스 3:** '100년 규칙 테스트 - 2100년은 평년이므로 건너뜀'
  - **테스트 케이스 4:** '400년 규칙 테스트 - 2000년, 2400년은 윤년이므로 포함'

## 검증 포인트 (Given-When-Then)

Epic에서 가져온 모든 검증 포인트를 명시합니다.

### 검증 포인트 1: 2월 29일 매년 반복

```
Given: 시작일 2024-02-29 (윤년), 반복 유형 매년, 간격 1
When: 10년 치 일정을 생성
Then: 다음 날짜에만 일정이 생성됨
  - 2024-02-29 ✓ (윤년)
  - 2025-02-xx ✗ (평년, 건너뜀)
  - 2026-02-xx ✗ (평년, 건너뜀)
  - 2027-02-xx ✗ (평년, 건너뜀)
  - 2028-02-29 ✓ (윤년)
  - 2029-02-xx ✗ (평년, 건너뜀)
  - 2030-02-xx ✗ (평년, 건너뜀)
  - 2031-02-xx ✗ (평년, 건너뜀)
  - 2032-02-29 ✓ (윤년)
  - 2033-02-xx ✗ (평년, 건너뜀)
```

### 검증 포인트 2: 100년 단위 규칙

```
Given: 시작일 2000-02-29 (윤년, 400으로 나누어떨어짐), 반복 유형 매년, 간격 100
When: 300년 치 일정을 생성
Then: 다음 날짜에만 일정이 생성됨
  - 2000-02-29 ✓ (400으로 나누어떨어지는 윤년)
  - 2100-02-xx ✗ (100으로 나누어떨어지지만 400으로는 안 떨어져서 평년)
  - 2200-02-xx ✗ (평년)
  - 2300-02-xx ✗ (평년)
```

## 테스트 데이터

테스트에서 사용할 구체적인 데이터를 명시합니다.

### 2024년 2월 29일 시작, 간격 1

| 년도 | 윤년 여부 | 일정 생성 여부 | 생성 날짜  | 윤년 판별 규칙   |
| ---- | --------- | -------------- | ---------- | ---------------- |
| 2024 | ✓         | ✓              | 2024-02-29 | 4로 나누어떨어짐 |
| 2025 | ✗         | ✗              | (건너뜀)   | 평년             |
| 2026 | ✗         | ✗              | (건너뜀)   | 평년             |
| 2027 | ✗         | ✗              | (건너뜀)   | 평년             |
| 2028 | ✓         | ✓              | 2028-02-29 | 4로 나누어떨어짐 |
| 2032 | ✓         | ✓              | 2032-02-29 | 4로 나누어떨어짐 |

### 100년 규칙 테스트 (간격 100)

| 년도 | 윤년 여부 | 일정 생성 여부 | 생성 날짜  | 윤년 판별 규칙              |
| ---- | --------- | -------------- | ---------- | --------------------------- |
| 2000 | ✓         | ✓              | 2000-02-29 | 400으로 나누어떨어짐        |
| 2100 | ✗         | ✗              | (건너뜀)   | 100으로 나누어떨어짐 (평년) |
| 2200 | ✗         | ✗              | (건너뜀)   | 100으로 나누어떨어짐 (평년) |
| 2400 | ✓         | ✓              | 2400-02-29 | 400으로 나누어떨어짐        |

## 기술 참고사항

### 윤년 판별 함수

```typescript
function isLeapYear(year: number): boolean {
  if (year % 400 === 0) return true;
  if (year % 100 === 0) return false;
  if (year % 4 === 0) return true;
  return false;
}
```

### 윤년 판별 규칙

- 4로 나누어떨어지는 해는 윤년
- 단, 100으로 나누어떨어지는 해는 평년
- 단, 400으로 나누어떨어지는 해는 윤년

**예시:**

- 2024: 윤년 (4로 나누어떨어짐)
- 2100: 평년 (100으로 나누어떨어지지만 400으로는 안 떨어짐)
- 2000: 윤년 (400으로 나누어떨어짐)

### 동작 명세

- 윤년 2월 29일에 매년 반복을 선택하면 2월 29일이 있는 해(윤년)에만 일정을 생성한다.
- 평년은 건너뛴다.
- 2월 28일이나 3월 1일로 변환하지 않는다.

---
