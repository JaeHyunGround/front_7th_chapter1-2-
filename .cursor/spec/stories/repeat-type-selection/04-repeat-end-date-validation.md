---
epic: repeat-type-selection
test_suite: 반복 종료일 입력 검증
---

# Story: 반복 종료일 입력 검증

## 개요

반복 종료일 입력의 형식, 유효성, 시작일과의 관계를 검증하고, 선택적으로 입력할 수 있도록 합니다.

## Epic 연결

- **Epic**: 반복 유형 선택
- **Epic 파일**: `.cursor/spec/epics/repeat-type-selection.md`
- **검증 포인트**: Epic의 "예상 동작" 섹션 4번에서 추출

## 테스트 구조 및 범위

이 Story가 작성될 테스트 코드의 논리적 계층 구조를 명시합니다.

- **테스트 스위트 (Describe Block):** '반복 종료일 입력 검증'
  - **테스트 케이스 1:** '종료일을 입력하지 않으면 유효한 상태(무기한 반복)'
  - **테스트 케이스 2:** '유효한 날짜 형식(YYYY-MM-DD)을 입력하면 유효함'
  - **테스트 케이스 3:** '유효하지 않은 날짜(2024-02-30)를 입력하면 "유효하지 않은 날짜입니다." 오류 표시'
  - **테스트 케이스 4:** '잘못된 형식(24-01-01)을 입력하면 "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)" 오류 표시'
  - **테스트 케이스 5:** '시작일보다 이전 날짜를 입력하면 "종료일은 시작일보다 미래여야 합니다." 오류 표시'

## 검증 포인트 (Given-When-Then)

Epic에서 가져온 모든 검증 포인트를 명시합니다.

### 검증 포인트 1: 선택적 입력

```
Given: 반복 종료일 입력 필드
When: 아무것도 입력하지 않음
Then: 유효한 상태 (무기한 반복)
```

### 검증 포인트 2: 유효한 날짜

```
Given: 시작일이 2024-01-15
When: 종료일을 2024-12-31로 입력
Then: 유효한 값으로 인정됨
```

### 검증 포인트 3: 존재하지 않는 날짜

```
Given: 반복 종료일 입력 필드
When: '2024-02-30'을 입력
Then: "유효하지 않은 날짜입니다." 오류 표시
```

### 검증 포인트 4: 잘못된 형식

```
Given: 반복 종료일 입력 필드
When: '24-01-01' 형식으로 입력
Then: "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)" 오류 표시
```

### 검증 포인트 5: 시작일보다 이전

```
Given: 시작일이 2024-01-15
When: 종료일을 2024-01-14로 입력
Then: "종료일은 시작일보다 미래여야 합니다." 오류 표시
```

## 테스트 데이터

테스트에서 사용할 구체적인 데이터를 명시합니다.

| 시작일     | 종료일 입력 | 예상 결과                                           | 비고            |
| ---------- | ----------- | --------------------------------------------------- | --------------- |
| 2024-01-15 | (없음)      | 유효함                                              | 무기한 반복     |
| 2024-01-15 | 2024-12-31  | 유효함                                              | 정상 입력       |
| 2024-01-15 | 2024-01-15  | 유효함                                              | 시작일과 동일   |
| 2024-01-15 | 2024-02-30  | 오류: "유효하지 않은 날짜입니다."                   | 존재하지 않음   |
| 2024-01-15 | 2024-13-01  | 오류: "유효하지 않은 날짜입니다."                   | 잘못된 월       |
| 2024-01-15 | 24-01-01    | 오류: "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)" | 잘못된 형식     |
| 2024-01-15 | 2024/01/20  | 오류: "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)" | 잘못된 구분자   |
| 2024-01-15 | 2024-01-14  | 오류: "종료일은 시작일보다 미래여야 합니다."        | 시작일보다 이전 |

## 기술 참고사항

### 관련 타입

```typescript
interface RepeatInfo {
  type: RepeatType;
  interval: number;
  endDate?: string; // YYYY-MM-DD 형식
}
```

### 검증 규칙

- **타입**: 문자열 (optional)
- **형식**: YYYY-MM-DD
- **유효성**: 존재하는 날짜
- **제약**: 시작일 이상
- **오류 메시지**:
  - "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)" (형식 오류)
  - "유효하지 않은 날짜입니다." (존재하지 않는 날짜)
  - "종료일은 시작일보다 미래여야 합니다." (시작일보다 이전)

### 동작 명세

- 반복 종료일은 선택적(optional)이다.
- 종료일이 없으면 무기한 반복된다.
- YYYY-MM-DD 형식만 허용한다.
- 유효한 날짜여야 한다.
- 시작 날짜와 같거나 이후여야 한다.

---
