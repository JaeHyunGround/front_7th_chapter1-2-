---
epic: repeat-end-until-date
test_suite: repeat end date - validation
---

# Story: 종료일 형식 및 유효성 검증

## 개요
종료일 입력의 형식, 존재 여부, 시작일과의 관계를 검증합니다.

## Epic 연결
- **Epic**: 반복 종료 - 특정 날짜까지 (Until Date)
- **Epic 파일**: `.cursor/spec/epics/repeat-end-until-date.md`
- **검증 포인트**: 예상 동작 섹션 2

## 테스트 구조 및 범위
- **테스트 스위트 (Describe Block):** 'repeat end date - validation'
  - **테스트 케이스 1:** 형식 오류(YYYY-MM-DD 아님)
  - **테스트 케이스 2:** 존재하지 않는 날짜 오류
  - **테스트 케이스 3:** 종료일이 시작일보다 과거인 경우 오류
  - **테스트 케이스 4:** 종료일이 시작일과 동일인 경우 허용

## 검증 포인트 (Given-When-Then)

### 검증 포인트 1: 형식 오류
```
Given: 반복 종료일 입력 필드
When: '2025-1-5' 입력 (형식 오류)
Then: "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)" 오류 표시
```

### 검증 포인트 2: 존재하지 않는 날짜
```
Given: 반복 종료일 입력 필드
When: '2025-02-30' 입력 (존재하지 않는 날짜)
Then: "유효하지 않은 날짜입니다." 오류 표시
```

### 검증 포인트 3: 시작일과의 관계(과거)
```
Given: 시작일 '2025-03-10', 종료일 '2025-03-09'
When: 검증 수행
Then: "종료일은 시작일보다 미래여야 합니다." 오류 표시
```

### 검증 포인트 4: 시작일과 동일 허용
```
Given: 시작일 '2025-03-10', 종료일 '2025-03-10'
When: 검증 수행
Then: 오류 없음 (시작일과 동일 허용)
```

## 테스트 데이터
| 시작일     | 종료일       | 유형     | 예상 결과                                        |
| ---------- | ------------ | -------- | ------------------------------------------------ |
| -          | 2025-1-5     | 형식 오류 | 메시지: "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)" |
| -          | 2025-02-30   | 존재 오류 | 메시지: "유효하지 않은 날짜입니다."                 |
| 2025-03-10 | 2025-03-09   | 관계 오류 | 메시지: "종료일은 시작일보다 미래여야 합니다."      |
| 2025-03-10 | 2025-03-10   | 정상     | 오류 없음                                         |

## 기술 참고사항
- `useEventForm`의 `endDateError`는 형식/존재/관계(시작일 이상) 검증을 수행합니다.
- 정확 오류 문자열:
  - "날짜 형식이 올바르지 않습니다. (YYYY-MM-DD)"
  - "유효하지 않은 날짜입니다."
  - "종료일은 시작일보다 미래여야 합니다."
