---
epic: repeat-schedule-edit
test_suite: 반복 일정 편집 - 단일 수정 분리 저장
---

# Story: 단일 수정(예) - 인스턴스 분리 저장

## 개요

모달에서 '예' 선택 시 해당 인스턴스를 단일 일정으로 분리 저장하고, 시리즈에서는 해당 날짜를 예외 처리하는 동작을 검증합니다.

## Epic 연결

- **Epic**: 반복 일정 수정 (단일/전체 선택)
- **Epic 파일**: `.cursor/spec/epics/repeat-schedule-edit.md`
- **검증 포인트 출처**: 예상 동작 섹션 2) 단일 수정(예)

## 테스트 구조 및 범위

- **테스트 스위트 (Describe Block):** '반복 일정 편집 - 단일 수정 분리 저장'
  - **테스트 케이스 1:** '예' 선택 시 새 단일 이벤트 생성(repeat.type='none')
  - **테스트 케이스 2:** 분리된 단일 이벤트 카드에 반복 아이콘이 표시되지 않음
  - **테스트 케이스 3:** 원 시리즈는 해당 날짜를 예외 처리하여 중복되지 않음
  - **테스트 케이스 4:** 시간 겹침 시 '일정 겹침 경고' 다이얼로그 노출 후 진행 가능

## 검증 포인트 (Given-When-Then)

### 검증 포인트 1: 단일 분리 저장과 아이콘 제거

```
Given: 2025-11-05 수요일 09:00-10:00, 매주 반복 일정(제목 "주간 회의")
When: 2025-11-05 인스턴스를 편집 → 제목을 "외부 미팅"으로 변경 → 저장 → 모달에서 "예" 선택
Then: 이벤트 목록에 2025-11-05 날짜에 제목이 "외부 미팅"인 단일 일정 생성, repeat.type = 'none'
And: 같은 날짜에 원 시리즈 인스턴스는 더 이상 표시되지 않음(예외 처리)
And: 단일 일정 카드에 반복 아이콘 미표시
```

### 검증 포인트 2: 겹침 경고 처리

```
Given: 단일 수정 시 시작/종료 시간을 기존 일정과 겹치도록 변경
When: 저장 → 겹침 검증
Then: "일정 겹침 경고" 다이얼로그가 노출되고, 계속 진행 시 저장됨
```

## 테스트 데이터

| 필드        | 값              | 비고                         |
| ----------- | ---------------- | ---------------------------- |
| date        | '2025-11-05'     | 대상 인스턴스 날짜           |
| startTime   | '09:00'          |                              |
| endTime     | '10:00'          |                              |
| repeat.type | 'weekly'         | 원본은 반복, 분리본은 'none' |

## 기술 참고사항

- 단일 분리 저장 후 데이터: `repeat = { type: 'none', interval: 1 }`
- 원본 시리즈에는 `exceptions`에 해당 날짜(YYYY-MM-DD) 추가 필요
- 충돌 시 경고 라벨 정확 문자열: "일정 겹침 경고"


