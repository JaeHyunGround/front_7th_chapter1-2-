---
epic: repeat-schedule-delete
test_suite: 반복 일정 삭제 - 단일 인스턴스 삭제(예)
---

# Story: '예' 선택 - 해당 인스턴스만 삭제(예외 처리)

## 개요
확인 모달에서 '예'를 선택하면 해당 날짜 인스턴스만 삭제되도록 시리즈에 예외(exceptions)를 추가하고, 목록/달력에서 해당 인스턴스가 제외되는지 검증합니다.

## Epic 연결
- **Epic**: 반복 일정 삭제
- **Epic 파일**: `.cursor/spec/epics/repeat-schedule-delete.md`
- **검증 포인트 출처**: 예상 동작 섹션 2) '예' 선택 - 해당 일정만 삭제(예외 처리)

## 테스트 구조 및 범위
- **테스트 스위트 (Describe Block):** '반복 일정 삭제 - 단일 인스턴스 삭제(예)'
  - **테스트 케이스 1:** PUT `/api/recurring-events/:repeatId`로 exceptions 추가 → 인스턴스 미노출, 성공 토스트
  - **테스트 케이스 2:** 서버 오류 시 실패 토스트 표시 및 목록 보존
  - **테스트 케이스 3:** 동일 날짜 예외 중복 추가 시 중복 없이 관리(uniq)

## 검증 포인트 (Given-When-Then)
```
Given: repeat.id = "r-123"인 매주 반복 일정, 선택 날짜 = '2025-11-05'
When: 삭제 클릭 → 모달에서 '예' 선택 → 서버에 PUT /api/recurring-events/r-123 (body.repeat.exceptions에 '2025-11-05' 추가)
Then: 목록/달력 갱신 시 2025-11-05 인스턴스가 표시되지 않음
And: 토스트 "일정이 삭제되었습니다." 표시
```

## 테스트 데이터
| 필드              | 값            | 비고                           |
| ----------------- | ------------- | ------------------------------ |
| repeat.id         | 'r-123'       | 시리즈 식별자                  |
| date              | '2025-11-05'  | 삭제할 인스턴스 날짜           |
| repeat.exceptions | ['2025-11-05']| 예외 추가 후 기대 상태         |

## 기술 참고사항
- 엔드포인트: PUT `/api/recurring-events/:repeatId`
- 성공 토스트: "일정이 삭제되었습니다." / 실패 토스트: "일정 삭제 실패"
- 예외 배열은 중복 없이 유지되어야 함(uniq)
